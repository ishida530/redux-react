(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(16),i=n.n(a),s=(n(46),n(14)),o=n(6),l=n(8),u=n(5),j=(n(50),n(17)),b=n(18),d=n.n(b),O=n(7),p=n(23),f=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},h={basket:[],request:{request:{pending:!1,error:!1,success:!1}}},m=[{value:"by Name",label:"a-z",filter:f},{value:"by Name z-a",label:"z-a",filter:function(e,t){return e.title>t.title?-1:e.title<t.title?1:0}},{value:"od najmniejszej",label:"min-max cena",filter:function(e,t){return e.price-t.price}},{value:"od nawiekszej",label:"max-min cena",filter:function(e,t){return t.price-e.price}}],x=[{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"},{value:"all",label:"wszystkie"}],k=n(35),v=n.n(k),g=0,y=function(e,t){return(t-.2*t).toFixed(2)},S=function(e){return e.books},_=function(e){var t;return g=0,0!==e.basket.length&&(t=e.basket,Object.values(t).forEach((function(e){return isNaN(e.count)?void 0:g+=e.count}))),g},N=function(e){return"app/books/".concat(e)},w=N("UPDATE_BOOKS"),C=N("ADD_BOOK_TO_BASKET"),I=N("REMOVE_BOOK_FROM_BASKET"),L=N("REMOVE_ALL_BOOK_FROM_BASKET"),E=N("START_REQUEST"),P=N("FINISH_REQUEST_WITH_ERROR"),T=N("FINISH_REQUEST_WITH_SUCCESS"),F=N("SET_AMOUNT_BOOK_IN_BASKET"),z=N("SET_COUNT_BOOK"),B=function(e){return{type:w,payload:e}},D=function(){return{type:T}},A=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c,r,a,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new Date,null!=localStorage.getItem("hour")&&parseInt(localStorage.getItem("hour"))===parseInt(n.getHours())){e.next=20;break}return localStorage.setItem("hour",n.getHours()),localStorage.setItem("time",Date.now()),localStorage.setItem("time2",Date()),t({type:E}),e.next=9,fetch("https://wolnelektury.pl/api/authors/adam-mickiewicz/kinds/liryka/books/");case 9:return c=e.sent,e.next=12,c.json();case 12:for(r=e.sent,a=r.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{key:v()().toString(),count:0,price:(100*Math.random()).toFixed(2),onSale:!1})})),i=0;i<3;i++)a[Math.floor(Math.random()*a.length)].onSale=!0;t(B(a)),t(D()),localStorage.setItem("array",JSON.stringify(a)),e.next=22;break;case 20:s=JSON.parse(localStorage.getItem("array")),t(B(s))&&t(D());case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0),t({type:P});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}()},M=function(e,t){return function(t){0===e.count?t({type:I,payload:e}):(t(function(e){return{type:z,payload:e}}(e)),t(function(e){return{type:C,payload:e}}(e)))}},K=0,R=n(36),U=n.p+"static/media/pexels-kaboompics-com-6332.269f73da.jpg",H=n.p+"static/media/pexels-ma\xebl-balland-3457273.344df4fd.jpg",q=n.p+"static/media/pexels-martin-p\xe9chy-922100.1f28be85.jpg",J=n(25),V=n(30),W=(n(60),n(2)),Q=function(e){var t,n=Object(c.useState)(1),r=Object(l.a)(n,2),a=r[0],i=r[1],j=Object(c.useState)(!1),b=Object(l.a)(j,2),O=b[0],f=b[1],h=Object(c.useState)(""),m=Object(l.a)(h,2),x=m[0],k=m[1],v=e.item,g=e.visibleForm,S=Object(u.c)(),_=function(e){return S(M(e))},N=v.key,w=v.simple_thumb,C=v.title,I=v.price,L=v.count,E=v.onSale,P=v.href,T=Object(o.f)();console.log(T);var F=function(){var e=Object(p.a)(d.a.mark((function e(){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,t=c.fragment_data,k(c.fragment_data),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){0!==T.id&&(t=F()),console.log("x",t)}),[]);return Object(W.jsxs)(W.Fragment,{children:["        ",Object(W.jsxs)("li",{className:"bookItem",children:[Object(W.jsx)("img",{src:w,alt:"Logo"}),Object(W.jsxs)("div",{className:"li__div--info",children:[Object(W.jsx)("h3",{children:C}),E?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("span",{children:[Object(W.jsx)("s",{children:Object(W.jsxs)("span",{className:"item__price--old",children:[I," "]})}),"PLN"]}),Object(W.jsxs)("span",{children:[Object(W.jsxs)("span",{className:"item__price--new",children:[y(0,I)," "]}),"PLN"]})]}):Object(W.jsxs)("span",{children:[Object(W.jsx)("span",{children:I})," PLN "]}),g?Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("form",{onSubmit:function(t){return function(e,t){console.log("book submit",t),e.preventDefault(),f(!0),i(1);var n=t.item,c=n.key,r=n.simple_thumb,s=n.title,o=n.price,l=n.onSale;return _({key:c,img:r,title:s,count:parseInt(a),price:o,onSale:l,oldPrice:o})}(t,e)&&i(1)},children:[Object(W.jsx)("input",{type:"number",min:1,value:a,onChange:function(e){return function(e){var t=e.target.value;0===parseInt(t)||0===t.length||t<0?f(!0):f(!1),i(t)}(e)}}),Object(W.jsx)("button",{disabled:O,type:"submit",children:Object(W.jsx)(V.a,{})})]})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(s.b,{to:"/product/".concat(N),children:["Wi\u0119cej szczeg\xf3\u0142\xf3w ",Object(W.jsx)(J.a,{})]}),Object(W.jsxs)("span",{className:"product__span-alert",children:[Object(W.jsx)("button",{className:"li__btn--addBasket",onClick:function(e){return function(e,t){e.preventDefault();var n=t.key,c=t.simple_thumb,r=t.title,a=t.price,i=t.onSale,s=t.href;return _({key:n,img:c,title:r,count:1,price:y(0,a),oldPrice:a,onSale:i,href:s})}(e,v)},children:Object(W.jsx)(V.a,{})}),L>0?"Dodano: "+L+"szt.":null]})]})]})]}),g?Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{children:"Fragment ksi\u0105\u017cki:"}),Object(W.jsx)("p",{dangerouslySetInnerHTML:{__html:x.html}})]}):null]})},X=[U,H,q],Y=0,G=function(){var e=Object(c.useState)(U),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),i=Object(l.a)(a,2),s=i[0],o=i[1],j=Object(u.d)((function(e){return S(e)})),b=Object(u.c)();Object(c.useEffect)((function(){return setInterval((function(){setTimeout((function(){return o(!1)}),1800),r(X[Y]),o(!0),++Y===X.length&&(Y=0)}),2e3),function(){return clearInterval(setInterval)}}),[]);var d=new Date;return Object(W.jsxs)("div",{className:"home",children:[Object(W.jsx)("ul",{className:"home__slider",children:Object(W.jsx)("img",{className:!0===s?"fade":null,src:n,alt:n})}),Object(W.jsx)("h2",{children:"Akutalne ksi\u0105\u017cki -20% przez: "}),Object(W.jsx)("div",{className:"home__counter",children:Object(W.jsx)(R.a,{onComplete:function(){return localStorage.clear(),b(A())},date:d.setHours(Number(localStorage.getItem("hour"))+1,0,0,0)})}),Object(W.jsx)("ul",{className:"home__list",children:j.filter((function(e){return e.onSale})).map((function(e){return Object(W.jsx)(Q,{item:e},e.key)}))})]})},Z=(n(63),n(31)),$=n(38),ee=n.n($),te=function(){var e=Object(u.d)((function(e){return S(e)})),t=Object(c.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!0),s=Object(l.a)(i,2),o=s[0],j=s[1],b=Object(c.useState)(""),d=Object(l.a)(b,2),O=d[0],p=d[1],h=Object(c.useState)(e),k=Object(l.a)(h,2),v=k[0],g=k[1],y=Object(c.useState)(0),_=Object(l.a)(y,2),N=_[0],w=_[1],C=Object(c.useState)(15),I=Object(l.a)(C,2),L=I[0],E=I[1],P=Object(c.useState)(0),T=Object(l.a)(P,2),F=(T[0],T[1]),z=N*L,B=Math.ceil(v.length/L),D=function(e){var t=e.selected;F(t)},A=function(e){var t=e.selected;w(t)};return Object(W.jsxs)("div",{className:"productList",children:[Object(W.jsx)("h2",{children:"Lista produkt\xf3w"}),Object(W.jsxs)("div",{children:[Object(W.jsxs)("label",{children:["Szukaj:",Object(W.jsx)("input",{value:O,onChange:function(t){D({selected:0}),p(t.target.value),A({selected:0}),g(e.filter((function(e){return e.title.toLocaleLowerCase().includes(t.target.value.toLocaleLowerCase())})))}}),Object(W.jsx)("button",{onClick:function(){return p(""),g(e)},children:"X"})]}),Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:function(){return e=!o,a(!r)&&j(e);var e},children:r?"Kafelki":"Lista"})}),Object(W.jsx)("div",{className:"wrapperSelect",children:Object(W.jsx)(Z.a,{autosize:!0,defaultValue:x[2],options:x,onChange:function(e){"all"===e.value?E(v.length):E(e.value)}})}),Object(W.jsx)("div",{className:"wrapperSelect",children:Object(W.jsx)(Z.a,{autosize:!0,defaultValue:m[0],options:m,onChange:function(t){D({selected:0}),A({selected:0}),g(e.sort(t.filter).filter((function(e){return e.title.toLocaleLowerCase().includes(O.toLocaleLowerCase())})))}})})]}),Object(W.jsx)("ul",{className:"".concat(r?"list":"tiles"),children:v.slice(z,z+L).map((function(e){return Object(W.jsx)(Q,{item:e},e.key)})).sort(f)}),Object(W.jsx)(ee.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:B,onPageChange:A,containerClassName:"paginationBtns",previousLinkClassName:"previousBtn",nextLinkClassName:"nextBtn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive",onPageActive:D})]})},ne=function(){return Object(W.jsx)("div",{children:"ContactForm"})},ce=(n(78),function(e){var t=Object(u.c)(),n=function(e){return t(M(e))},c=function(e){return t({type:L,payload:e})},r=function(e){return t({type:F,payload:e})},a=e.key,i=e.title,s=e.count,o=e.oldPrice,l=e.price,j=e.onSale,b=e.img,d=e.href;console.log("111",d);return Object(W.jsxs)("li",{children:[Object(W.jsx)("img",{src:b,alt:""}),Object(W.jsxs)("span",{children:[Object(W.jsx)("b",{children:"Tytu\u0142: "}),i,"."]}),Object(W.jsxs)("div",{children:[Object(W.jsxs)("label",{children:[Object(W.jsx)("b",{children:" Ilo\u015bc sztuk:"})," ",Object(W.jsx)("input",{min:0,max:100,type:"number",value:s,onChange:function(t){return function(e,t){var n=t.key,c=t.img,a=t.title,i=t.price,s=t.oldPrice,o=t.onSale;r({key:n,img:c,title:a,count:parseInt(e.target.value),price:i,oldPrice:s,onSale:o})}(t,e)},onBlur:function(t){return function(e,t){var n=t.key,a=t.img,i=t.title,s=t.price,o=t.oldPrice,l=t.onSale;0!==e.target.value.length&&0!=e.target.value||setTimeout((function(){window.confirm("usuna\u0107?")?c({key:t.key}):(r({key:n,img:a,title:i,count:1,price:s,onSale:l,oldPrice:o}),e.target.focus())}),500)}(t,e)}})]}),Object(W.jsx)("button",{onClick:function(t){return function(e,t){var c=t.key,r=t.img,a=t.title,i=t.price,s=t.oldPrice,o=t.onSale;e.preventDefault(),n({key:c,img:r,title:a,count:1,price:i,oldPrice:s,onSale:o})}(t,e)},children:"+"}),Object(W.jsx)("button",{onClick:function(t){return function(e,t){var r=t.key,a=t.img,i=t.title,s=t.price,o=t.oldPrice,l=t.onSale;e.preventDefault(),t.count>1?n({key:r,img:a,title:i,count:0,price:s,oldPrice:o,onSale:l}):c({key:t.key})}(t,e)},children:"-"})]}),Object(W.jsxs)("label",{children:[Object(W.jsx)("b",{children:" Cena: "}),j?Object(W.jsxs)(W.Fragment,{children:[" ",Object(W.jsx)("s",{children:Object(W.jsx)("span",{style:{color:"red"},children:o})})," ",Object(W.jsxs)("span",{style:o?{color:"green"}:null,children:[" ",l," PLN"]})]}):Object(W.jsxs)("span",{children:[o," PLN"]})]}),Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:function(t){return function(e,t){e.preventDefault(),c({key:t.key})}(t,e)},children:"Usu\u0144 "})})]},a)}),re=function(){var e=Object(u.d)((function(e){return function(e){return e.basket}(e)})),t=Object(u.d)((function(e){return _(e)})),n=Object(u.d)((function(e){return function(e){var t=0;return e.basket.forEach((function(e){isNaN(e.count)||(t+=e.price*e.count)})),t}(e)}));return Object(W.jsxs)("div",{className:"basket",children:[Object(W.jsx)("ul",{children:0===t?Object(W.jsx)("h1",{children:"Koszyk jest pusty"}):e.map((function(e){return ce(e)}))}),Object(W.jsxs)("p",{className:"sum",children:[Object(W.jsx)("b",{children:"SUMA:"})," ",Object(W.jsxs)("span",{children:[n.toFixed(2),"PLN"]})]})]})},ae=(n(79),function(){var e=Object(u.d)((function(e){return S(e)})),t=Object(o.f)();return e.filter((function(e){return e.key===t.id})).map((function(e){return Object(W.jsx)("div",{className:"product__wrapper",children:Object(W.jsx)(Q,{item:e,visibleForm:!0},t.id)})}))}),ie=function(e){var t=e.match;e.props;return Object(W.jsxs)("div",{children:[Object(W.jsx)("h3",{children:"Strona produktu"}),Object(W.jsx)(ae,{id:t.params.id}),Object(W.jsx)(s.b,{to:"/products",children:"pworot do listy produktow "})]})},se=(n(80),function(){return Object(W.jsx)("section",{className:"contentPage",children:Object(W.jsxs)(o.c,{children:[Object(W.jsx)(o.a,{exact:!0,path:"/",component:G}),Object(W.jsx)(o.a,{exact:!0,path:"/redux-react",component:G}),Object(W.jsx)(o.a,{path:"/products",component:te}),Object(W.jsx)(o.a,{path:"/product/:id",component:ie}),Object(W.jsx)(o.a,{path:"/contact",component:ne}),Object(W.jsx)(o.a,{path:"/basket",component:re}),Object(W.jsx)(o.a,{render:function(){return Object(W.jsx)("h1",{children:"Strona nie istnieje"})}})]})})}),oe=(n(81),[{name:"start",path:"/",exact:!0},{name:"produkty",path:"/products"},{name:"kontakt",path:"/contact"},{name:"koszyk",path:"/basket"}]),le=Object(u.b)((function(e){return{basket:_(e)}}))((function(e){var t=e.basket,n=Object(c.useState)(),r=Object(l.a)(n,2),a=r[0],i=r[1];Object(c.useEffect)((function(){window.onscroll=function(){window.scrollY<=10?i(!1):i(!0)}}),[]);var o=oe.map((function(e){return Object(W.jsx)("li",{children:Object(W.jsx)(s.c,{exact:!!e.exact&&e.exact,to:e.path,children:"koszyk"===e.name?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(J.b,{})," ",Object(W.jsx)("span",{children:isNaN(t)?"aa":t})]}):"".concat(e.name)})},e.name)}));return Object(W.jsxs)("header",{className:a?"menu scrolled":"menu",children:[Object(W.jsxs)("h1",{children:[Object(W.jsx)("span",{children:"Book"}),"Store"]}),Object(W.jsx)("ul",{className:"header__nav",children:o})]})})),ue=n(39),je=n.n(ue),be=function(){var e=Object(u.d)((function(e){return function(e){return e.request}(e)})),t=Object(u.c)();return Object(c.useEffect)((function(){t(A())}),[]),Object(W.jsxs)(s.a,{children:[Object(W.jsx)(le,{}),e.pending&&Object(W.jsx)(je.a,{type:"Rings",color:"red",height:80,width:80}),e.error&&console.warn("warrning"),e.success&&Object(W.jsx)(se,{})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},Oe=n(26),pe=n(40),fe=n(41),he=Object(fe.composeWithDevTools)({})(Object(Oe.applyMiddleware)(pe.a)),me=Object(Oe.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case w:return Object(O.a)(Object(O.a)({},e),{},{books:Object(j.a)(c)});case C:return Object(O.a)(Object(O.a)({},e),{},{basket:[].concat(Object(j.a)(e.basket.filter((function(e){if(K=0,e.key===c.key&&(K=e.count,c.count+=K),e.key!==c.key)return e}))),[c]).sort(f)});case I:return Object(O.a)(Object(O.a)({},e),{},{basket:[].concat(Object(j.a)(e.basket.filter((function(e){if(e.key===c.key&&(K=e.count,c.count=--K),e.key!==c.key)return e}))),[c]).sort(f)});case L:return Object(O.a)(Object(O.a)({},e),{},{basket:Object(j.a)(e.basket.filter((function(e){return e.key!==c.key}))).sort(f)});case E:return Object(O.a)(Object(O.a)({},e),{},{request:{pending:!0,error:!1,success:!1}});case T:return Object(O.a)(Object(O.a)({},e),{},{request:{pending:!1,error:!1,success:!0}});case P:return Object(O.a)(Object(O.a)({},e),{},{request:{pending:!1,error:!0,success:!1}});case F:return Object(O.a)(Object(O.a)({},e),{},{basket:[].concat(Object(j.a)(e.basket.filter((function(e){if(K=0,e.key!==c.key)return e}))),[c]).sort(f)});case z:return Object(O.a)(Object(O.a)({},e),{},{books:Object(j.a)(e.books.filter((function(e){return e.key===c.key&&e.count++,e})))});default:return e}}),h,he),xe=me;i.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(u.a,{store:xe,children:Object(W.jsx)(be,{})})}),document.getElementById("root")),de()},46:function(e,t,n){},50:function(e,t,n){},60:function(e,t,n){},63:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.635e9799.chunk.js.map